// SPDX-License-Identifier: (GPL-2.0 OR MIT)
/*
 * Copyright 2021 Logic PD, Inc. DBA BeaconEmbeddedWorks
 */

/dts-v1/;

#include "imx8mn-beacon-kit.dts"

/ {
	aliases {
		/delete-property/ serial2;
		spi1 = <&ecspi1>;
		spi2 = <&ecspi2>;
	};
};

/* UART3 shares pins with ECSPI1, so they cannot both exist */
/delete-node/ &uart3;

&ecspi1 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_ecspi1>;
	status = "okay";
	cs-gpios = <&gpio5 9 GPIO_ACTIVE_LOW>;
	#address-cells = <1>;
	#size-cells = <0>;

	spidev1: spidev1@0 {
               compatible = "spidev";
               spi-max-frequency = <5000000>;
               reg = <0>;
       };
};

&ecspi2 {
	/delete-node/ eeprom@0;

	spidev2: spidev2@0 {
               compatible = "spidev";
               spi-max-frequency = <5000000>;
               reg = <0>;
       };
};

&iomuxc {
	pinctrl_ecspi1: uart3grp {
		fsl,pins = <
			MX8MN_IOMUXC_ECSPI1_SCLK_ECSPI1_SCLK		0x82
			MX8MN_IOMUXC_ECSPI1_MOSI_ECSPI1_MOSI		0x82
			MX8MN_IOMUXC_ECSPI1_MISO_ECSPI1_MISO		0x82
			MX8MN_IOMUXC_ECSPI1_SS0_GPIO5_IO9		0x41
		>;
	};
};

